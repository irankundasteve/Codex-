{% extends 'base.html' %}
{% block content %}
<section class="hero">
  <img src="{{ featured.images[0] }}" alt="{{ featured.title_text }}" />
  <div>
    <h1>Discover upcoming local events in Burundi</h1>
    <p>{{ featured.description_text }}</p>
    <a class="btn" href="{{ url_for('events_page', lang=lang) }}">View Events</a>
  </div>
</section>

<section class="search-filter">
  <input type="search" id="searchInput" placeholder="Search events..." />
  <select id="categoryFilter">
    <option value="all">All categories</option>
    {% for cat in event_categories %}<option value="{{ cat }}">{{ cat }}</option>{% endfor %}
  </select>
  <select id="sortFilter">
    <option value="date_asc">Date (Soonest)</option>
    <option value="date_desc">Date (Latest)</option>
  </select>
</section>

<section>
  <h2>Upcoming Events</h2>
  <div class="grid cards" id="eventGrid">
    {% for event in events %}
    <a class="card" href="{{ url_for('event_detail', lang=lang, slug=event.slug) }}">
      <img src="{{ event.images[0] }}" alt="{{ event.title_text }}" />
      <div class="card-body"><span class="badge">{{ event.category }}</span><h3>{{ event.title_text }}</h3><p>{{ event.date }} Â· {{ event.time }}</p></div>
    </a>
    {% endfor %}
  </div>
</section>

<section>
  <h2>Latest Blog Highlights</h2>
  <div class="grid cards">
    {% for post in posts %}
    <a class="card" href="{{ url_for('blog_post', lang=lang, slug=post.slug) }}">
      <img src="{{ post.image }}" alt="{{ post.title_text }}" />
      <div class="card-body"><span class="badge">{{ post.category }}</span><h3>{{ post.title_text }}</h3><p>{{ post.excerpt_text }}</p></div>
    </a>
    {% endfor %}
  </div>
</section>
{% endblock %}
{% block scripts %}
<script>window.eventsApiUrl = "{{ url_for('events_api', lang=lang) }}"; window.currentLang = "{{ lang }}";</script>
<script src="{{ url_for('static', filename='js/events.js') }}"></script>
{% endblock %}
