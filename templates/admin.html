<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Admin Dashboard</title><link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"><script src="https://cdn.jsdelivr.net/npm/chart.js"></script></head>
<body><main>
<section><h1>Admin Dashboard (English)</h1><form method="post" action="{{ url_for('admin_logout') }}"><button class="btn" type="submit">Logout</button></form>
<div class="stats"><div class="stat"><h3>{{ summary.events }}</h3><p>Total events</p></div><div class="stat"><h3>{{ summary.posts }}</h3><p>Total posts</p></div><div class="stat"><h3>{{ summary.media }}</h3><p>Total media</p></div><div class="stat"><h3>{{ summary.views }}</h3><p>Page views</p></div><div class="stat"><h3>{{ summary.visitors }}</h3><p>Unique visitors</p></div></div></section>
<section><h2>Events management</h2><form method="post" class="contact-form"><input type="hidden" name="action" value="add_event"><input name="slug" placeholder="slug"><input name="title_rn" placeholder="Title (Kirundi)"><input name="title_fr" placeholder="Title (French)"><textarea name="desc_rn" placeholder="Description (Kirundi)"></textarea><textarea name="desc_fr" placeholder="Description (French)"></textarea><input name="date" type="date"><input name="time" type="time"><input name="location" placeholder="Location"><input name="image" placeholder="Image URL"><select name="category">{% for cat in event_categories %}<option value="{{ cat }}">{{ cat }}</option>{% endfor %}</select><button class="btn" type="submit">Add event</button></form>
<div class="grid cards">{% for e in events %}<div class="card"><div class="card-body"><h3>{{ e.title.rn }}</h3><p>{{ e.date }} Â· {{ e.category }}</p><form method="post"><input type="hidden" name="action" value="delete_event"><input type="hidden" name="id" value="{{ e.id }}"><button class="btn" type="submit">Delete</button></form></div></div>{% endfor %}</div></section>
<section><h2>Categories management</h2><form method="post" class="search-filter"><input type="hidden" name="action" value="add_category"><select name="target"><option value="event">Event category</option><option value="post">Post category</option></select><input name="name" placeholder="New category"><button class="btn" type="submit">Add</button></form></section>
<section><h2>Analytics Overview</h2><canvas id="analyticsChart" height="120"></canvas><div class="grid cards"><div class="card"><div class="card-body"><h3>Top Events</h3>{% for item in top_events %}<p>{{ item[0] }} ({{ item[1] }})</p>{% else %}<p>No views yet.</p>{% endfor %}</div></div><div class="card"><div class="card-body"><h3>Top Posts</h3>{% for item in top_posts %}<p>{{ item[0] }} ({{ item[1] }})</p>{% else %}<p>No views yet.</p>{% endfor %}</div></div></div></section>
<section><h2>Inbox messages</h2>{% for m in messages %}<p><strong>{{ m.name }}</strong> ({{ m.email }}): {{ m.message }}</p>{% else %}<p>No messages yet.</p>{% endfor %}</section>
</main>
<script>new Chart(document.getElementById('analyticsChart'),{type:'bar',data:{labels:['Events','Posts','Media','Views','Visitors'],datasets:[{data:[{{ summary.events }},{{ summary.posts }},{{ summary.media }},{{ summary.views }},{{ summary.visitors }}],backgroundColor:['#2563eb','#7c3aed','#f43f5e','#0ea5e9','#14b8a6']}]},options:{plugins:{legend:{display:false}}}});</script>
</body></html>
